version: v1
kind: kubernetes
application: demo-utilities

targets:
  prod-cmd-hook:
    account: cluster01
    namespace: armory-rna
    strategy: rolling
  prod-prometheus:
    account: cluster01
    namespace: prometheus
    strategy: rolling
  stage-cmd-hook:
    account: cluster02
    namespace: armory-rna
    strategy: rolling

manifests:
  - path: utilities/cmdhook.yml
    targets: ['prod-cmd-hook','stage-cmd-hook']
  - path: utilities/prometheus.yml
    targets: ['prod-prometheus']
  
strategies:
  rolling:
    canary:
      steps:
        - setWeight:
            weight: 100
